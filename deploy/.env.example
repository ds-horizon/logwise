# -----------------------------
# Log Central - .env.example
# Fill in sensitive values locally; do NOT commit real secrets.
# -----------------------------

# Kafka
KAFKA_BROKERS=kafka
KAFKA_TOPIC=logs_topic

# MySQL
MYSQL_DATABASE=myapp
MYSQL_USER=myapp
MYSQL_PASSWORD=myapp_pass
MYSQL_ROOT_PASSWORD=myapp_pass

# Orchestrator
DB_MASTER_HOST=db
DB_PASSWORD=myapp_pass
DB_SLAVE_HOST=db
DB_USERNAME=myapp
ORCH_PORT=8080
CRON_TOKEN=replace_me
ARTIFACT_VERSION=1.0.0-SNAPSHOT
S3_ENDPOINT_OVERRIDE=
KAFKA_BROKERS_HOST=kafka
SPARK_MASTER_HOST=spark-master
SPARK_JAR_PATH="file:/opt/app/app.jar"
LOG4J_PROPERTIES_FILE_PATH="file:/opt/spark/conf/log4j.properties"

# AWS / S3 / Athena
AWS_REGION=us-east-1
AWS_SESSION_TOKEN=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
S3_BUCKET=d11-confluent-logs
S3_PREFIX=logs/parquet
S3_ATHENA_OUTPUT=s3://d11-confluent-logs/athena-output/
ATHENA_WORKGROUP=primary
ATHENA_CATALOG=AwsDataCatalog
ATHENA_DATABASE=logwise

# Spark libs
SPARK_VERSION_MATCH=3.5.1
HADOOP_AWS_VERSION=3.3.4
AWS_SDK_VERSION=1.12.772

# Grafana
GRAFANA_PORT=3000
GF_SECURITY_ADMIN_USER=grafana
GF_SECURITY_ADMIN_PASSWORD=grafana_password
GF_INSTALL_PLUGINS=grafana-athena-datasource

# Spark behavior
SPARK_STREAMING=true

# Spark master/UI
SPARK_MASTER_UI_PORT=18080
SPARK_MASTER_URL=spark://spark-master:7077

# Use Spark Standalone REST submission (auto-submit on container start)
AUTO_SPARK_REST_SUBMIT=true
AUTO_SPARK_SUBMIT=false

# Your app
MAIN_CLASS=com.logwise.spark.MainApplication
SPARK_APP_NAME=logwise-spark

# Local JAR submission via REST (mounted to /opt/app/app.jar in master/worker)
# APP_RESOURCE default is file:/opt/app/app.jar, no change needed
# If you need to override, uncomment the next line:
# APP_RESOURCE=file:/opt/app/app.jar

# Optional runtime args (comma-separated, no spaces)
APP_ARGS=kafka.cluster.dns="kafka",kafka.cluster.name=logwise,kafka.manager.host="http://kafka-manager:9000",kafka.maxRatePerPartition=4000,kafka.startingOffsets=latest,kafka.subscribePattern="logs.*",spark.master.host="http://spark-master:8080"

# Spark resources (tune for your machine)
SPARK_CORES_MAX=4
SPARK_DRIVER_CORES=1
SPARK_DRIVER_MEMORY=2G
SPARK_EXECUTOR_CORES=1
SPARK_EXECUTOR_MEMORY=2G
SPARK_DRIVER_SUPERVISE=false

# Optional logging opts
SPARK_DRIVER_OPTS=
SPARK_EXECUTOR_OPTS=
