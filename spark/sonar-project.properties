# SonarQube/SonarLint/SonarCloud Project Configuration
# Basic best practices configuration for code quality
#
# IMPORTANT: This configuration works with:
# 1. SonarLint IDE Plugin (recommended for local development) - Works standalone, no server needed
# 2. SonarQube Maven Plugin - REQUIRES SonarQube server connection (cannot run standalone)
# 3. SonarCloud (recommended for CI/CD) - Cloud-hosted, NO server needed, free for open source
#
# ============================================================================
# OPTION 1: SonarLint IDE Plugin (RECOMMENDED - No server needed)
# ============================================================================
# - Install SonarLint plugin in your IDE (IntelliJ IDEA, Eclipse, VS Code)
# - The plugin will automatically detect .sonarlint/sonarlint.json and this file
# - Works completely standalone - no server connection required
# - Provides real-time code analysis as you type
#
# ============================================================================
# OPTION 2: SonarQube Maven Plugin (Requires server)
# ============================================================================
# The Maven plugin ALWAYS requires a SonarQube server. It cannot run standalone.
#
# RECOMMENDED: Use SonarQube 8.9.x LTS server (compatible with Java 11)
#   - Download: https://www.sonarsource.com/products/sonarqube/downloads/historical-downloads/
#   - Version: SonarQube 8.9.x LTS (last version that supports Java 11)
#   - Note: SonarQube 9.9+ requires Java 17+ for the server
#
# To use the Maven plugin with Java 11:
#   1. Install SonarQube 8.9.x LTS server (runs on Java 11)
#   2. Start the server: ./bin/[OS]/sonar.sh start
#   3. Default URL: http://localhost:9000
#   4. Default credentials: admin/admin (change on first login)
#   5. Generate a token (recommended for security):
#      - Go to http://localhost:9000 → My Account → Security → Generate Token
#      - Copy the token
#   6. Run analysis with authentication:
#      mvn clean verify sonar:sonar -Dsonar.login=YOUR_TOKEN
#      OR with username/password:
#      mvn clean verify sonar:sonar -Dsonar.login=admin -Dsonar.password=admin
#   7. View results at http://localhost:9000/dashboard?id=com.logwise%3Alogwise-spark
#
# Alternative: Use SonarLint IDE plugin (RECOMMENDED for local development)
#   - Works with Java 11, no server needed
#   - Real-time analysis as you code
#   - Perfect for local development
#
# This Maven plugin is useful for CI/CD pipelines that have a SonarQube server.
#
# ============================================================================
# OPTION 3: SonarCloud (RECOMMENDED for GitHub Actions CI/CD)
# ============================================================================
# SonarCloud is cloud-hosted - NO server to spin up! Perfect for GitHub Actions.
# 
# Setup:
# 1. Create account at https://sonarcloud.io (free for open source)
# 2. Import your GitHub repository
# 3. Generate token in SonarCloud → My Account → Security
# 4. Add token as GitHub Secret: SONAR_TOKEN
# 5. GitHub Actions workflow will automatically connect to SonarCloud
#
# For SonarCloud, you may need to set:
# - sonar.organization=YOUR_ORG_KEY (set in GitHub Actions or as property)
# - sonar.host.url=https://sonarcloud.io (usually auto-detected)
#
# See: docs/setup-guides/sonarcloud-setup.md for detailed instructions

# Project identification
sonar.projectKey=logwise-spark
sonar.projectName=Logwise Spark
sonar.projectVersion=0.0.1-SNAPSHOT

# Source code location
sonar.sources=src/main/java
sonar.tests=src/test/java
sonar.java.source=11
sonar.java.target=11

# Encoding
sonar.sourceEncoding=UTF-8

# Exclusions - Files and directories to exclude from analysis
sonar.exclusions=\
  **/com/logwise/spark/protobuf/**,\
  **/com/logwise/spark/MainApplication*,\
  **/*Builder.java,\
  **/lombok.config

# Test exclusions
sonar.test.exclusions=\
  **/runners/**,\
  **/*TestRunner.java

# Coverage exclusions (already defined in pom.xml, but can be overridden here)
sonar.coverage.exclusions=\
  **/com/logwise/constants/**,\
  **/com/logwise/feign/exceptions/**,\
  **/com/logwise/feign/logger/**,\
  **/com/logwise/guice/**,\
  **/com/logwise/schema/**,\
  **/com/logwise/spark/MainApplication*,\
  **/com/logwise/spark/protobuf/**

# Code duplication exclusions
sonar.cpd.exclusions=\
  **/com/logwise/spark/protobuf/**,\
  **/com/logwise/constants/**

# Language
sonar.language=java

# Quality Gate - Basic best practices rules
# These are enforced through SonarLint IDE plugin and SonarQube server

# Code Smell Thresholds
sonar.issue.ignore.multicriteria=e1,e2,e3

# Ignore issues on generated code
sonar.issue.ignore.multicriteria.e1.ruleKey=java:S1068
sonar.issue.ignore.multicriteria.e1.resourceKey=**/protobuf/**

# Ignore issues on Lombok generated code
sonar.issue.ignore.multicriteria.e2.ruleKey=java:S1068
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*Builder.java

# Ignore issues on test utilities
sonar.issue.ignore.multicriteria.e3.ruleKey=java:S1068
sonar.issue.ignore.multicriteria.e3.resourceKey=**/runners/**

# Analysis parameters
sonar.java.libraries=target/classes
sonar.java.test.libraries=target/test-classes
sonar.java.binaries=target/classes

# Additional analysis parameters
sonar.scanner.force-deprecated-java-version-warning=false

# SonarCloud Configuration (optional - can also be set via environment variables)
# sonar.organization=YOUR_ORG_KEY  # Your SonarCloud organization key
# sonar.host.url=https://sonarcloud.io  # Usually auto-detected, but can be explicit
# sonar.java.coveragePlugin=jacoco  # Use JaCoCo for coverage reports

